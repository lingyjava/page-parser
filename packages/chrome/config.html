<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>解析规则配置</title>
    <link rel="stylesheet" href="config.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>🔧 解析规则配置</h1>
        <p class="subtitle">为不同网站配置自定义的解析选择器</p>
      </header>

      <div class="main-content">
        <!-- 配置列表 -->
        <div class="config-list-section">
          <div class="section-header">
            <h2>已配置网站</h2>
            <div class="config-actions">
              <button id="add-new-btn" class="btn btn-primary">+ 新配置</button>
              <button
                id="export-configs-btn"
                class="btn btn-outline btn-outline-export"
              >
                ⬇ 导出
              </button>
              <button
                id="import-configs-btn"
                class="btn btn-outline btn-outline-import"
              >
                ⬆ 导入
              </button>
            </div>
          </div>
          <div id="config-list" class="config-list">
            <!-- 配置项会动态加载到这里 -->
          </div>
          <input
            type="file"
            id="import-file-input"
            accept="application/json"
            style="display: none"
          />
        </div>

        <!-- 配置编辑器 -->
        <div class="config-editor-section">
          <div class="section-header">
            <h2>配置编辑器</h2>
          </div>
          <div id="editor-container" class="editor-container">
            <div class="editor-placeholder">
              <p>👈 选择一个配置进行编辑，或点击"添加新配置"创建新的解析规则</p>
            </div>

            <form id="config-form" class="config-form" style="display: none">
              <div class="form-group">
                <label for="domain-input">网站域名 *</label>
                <input
                  type="text"
                  id="domain-input"
                  placeholder="例如: www.example.com"
                  required
                />
                <small>输入需要解析的网站域名</small>
              </div>

              <div class="form-group">
                <label for="name-input">配置名称</label>
                <input
                  type="text"
                  id="name-input"
                  placeholder="例如: 示例网站"
                />
                <small>为这个配置起一个易记的名称</small>
              </div>

              <div class="form-group">
                <label>解析选择器</label>
                <div id="selectors-container" class="selectors-container">
                  <!-- 选择器会动态添加到这里 -->
                </div>
                <button
                  type="button"
                  id="add-selector-btn"
                  class="btn btn-secondary"
                >
                  + 添加选择器
                </button>
              </div>

              <div class="form-actions">
                <button type="submit" class="btn btn-success">
                  💾 保存配置
                </button>
                <button
                  type="button"
                  id="export-single-btn"
                  class="btn btn-outline btn-outline-export"
                >
                  ⬇ 导出当前配置
                </button>
                <button type="button" id="delete-btn" class="btn btn-danger">
                  🗑️ 删除配置
                </button>
                <button type="button" id="cancel-btn" class="btn btn-outline">
                  取消
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- 全局设置 -->
      <div class="help-section">
        <h3>🌐 全局设置</h3>
        <div class="form-group">
          <label for="api-endpoint-input">发送接口地址</label>
          <input
            type="text"
            id="api-endpoint-input"
            placeholder="例如: http://localhost:8080/newshub/api/add"
          />
          <small>用于 Popup 中“发送到接口”按钮的目标地址</small>
        </div>
        <div class="form-actions">
          <button type="button" id="save-settings-btn" class="btn btn-success">
            💾 保存全局设置
          </button>
        </div>
      </div>

      <div class="help-section">
        <h3>💡 使用说明</h3>
        <ul>
          <li>
            <strong>CSS选择器</strong>：使用标准的CSS选择器语法（如
            <code>.class</code>, <code>#id</code>, <code>div > p</code>）
          </li>
          <li>
            <strong>多个元素</strong>：如果选择器匹配多个元素，将返回一个数组
          </li>
          <li>
            <strong>属性提取</strong>：可以使用
            <code>@attr</code> 语法提取属性值，如 <code>img@src</code>
          </li>
          <li>
            <strong>测试配置</strong
            >：保存后在目标网站打开插件popup即可测试解析效果
          </li>
        </ul>
      </div>
    </div>

    <script src="config.js"></script>
  </body>
</html>
